[ 2020-04-17T16:58:29+08:00 ] 123.182.91.5 /xn_admin.php
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000017s ]
INFO: [ app_init ] --END-- [ RunTime:0.000624s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000542s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000590s ]
SQL: SHOW COLUMNS FROM `my_menu` [ RunTime:0.0033s ]
SQL: SELECT * FROM `my_menu` WHERE `status` = 1 ORDER BY sort,id  [ RunTime:0.0006s ]
SQL: SELECT * FROM `my_menu` WHERE `status` = 1 AND `quick` = 1 ORDER BY sort,id  [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000046s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000089s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.046925s ]
INFO: [ view_parse ] --END-- [ RunTime:0.046986s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000385s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000415s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000636s ]
INFO: [ app_end ] --END-- [ RunTime:0.000679s ]

[ 2020-04-17T16:58:30+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/main
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000013s ]
INFO: [ app_init ] --END-- [ RunTime:0.000310s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000317s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000355s ]
SQL: SELECT VERSION() as ver; [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000050s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000088s ]
NOTIC: [8] Use of undefined constant session - assumed 'session' /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/189add388cdd1263d35cd37739affe0d.php 第 52 行.
NOTIC: [8] Undefined variable: Think /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/189add388cdd1263d35cd37739affe0d.php 第 52 行.
NOTIC: [8] Use of undefined constant yang_adm_superadmin - assumed 'yang_adm_superadmin' /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/189add388cdd1263d35cd37739affe0d.php 第 52 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006042s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006075s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000151s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000184s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000350s ]
INFO: [ app_end ] --END-- [ RunTime:0.000380s ]

[ 2020-04-17T16:58:30+08:00 ] 123.182.91.5 /xn_admin.php?s=/Index/getParentCate&pid=0&rnd=38056
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000307s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000469s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000518s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0018s ]
SQL: SHOW COLUMNS FROM `my_model` [ RunTime:0.0016s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_category category LEFT JOIN my_model model ON category.modelid = model.id WHERE category.pid = 0 AND category.type = 0 LIMIT 1   [ RunTime:0.0006s ]
SQL: SELECT category.id AS id,category.name AS name,category.ename AS ename,category.catpic AS catpic,category.pid AS pid,category.modelid AS modelid,category.type AS type,category.seotitle AS seotitle,category.keywords AS keywords,category.description AS description,category.template_category AS template_category,category.template_list AS template_list,category.template_show AS template_show,category.status AS status,category.sort AS sort,category.property AS property,model.name AS modelname,model.tablename AS tablename FROM my_category category LEFT JOIN my_model model ON category.modelid = model.id WHERE category.pid = 0 AND category.type = 0 ORDER BY category.sort ASC,category.id ASC  [ RunTime:0.0007s ]

[ 2020-04-17T17:00:05+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/42
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000024s ]
INFO: [ app_init ] --END-- [ RunTime:0.000338s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000319s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000359s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0081s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (42,'44','75','76','77','78','43','45') LIMIT 1   [ RunTime:0.0043s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (42,'44','75','76','77','78','43','45') ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0005s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000066s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000108s ]
SQL: SHOW COLUMNS FROM `my_iteminfo` [ RunTime:0.0022s ]
SQL: SELECT * FROM `my_iteminfo` WHERE `group` = 'flagtype' ORDER BY sort,id  [ RunTime:0.0004s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.055750s ]
INFO: [ view_parse ] --END-- [ RunTime:0.055786s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000229s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000260s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000485s ]
INFO: [ app_end ] --END-- [ RunTime:0.000536s ]

[ 2020-04-17T17:00:09+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000306s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000340s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000378s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0012s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0006s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000064s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.021709s ]
INFO: [ view_parse ] --END-- [ RunTime:0.021740s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000134s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000156s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.004945s ]
INFO: [ app_end ] --END-- [ RunTime:0.004995s ]

[ 2020-04-17T17:00:11+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000287s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000332s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000365s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007181s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007215s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000123s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000147s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000360s ]
INFO: [ app_end ] --END-- [ RunTime:0.000391s ]

[ 2020-04-17T17:00:11+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=config&&noCache=1587114082113
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000299s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000351s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000384s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000397s ]
INFO: [ app_end ] --END-- [ RunTime:0.000429s ]

[ 2020-04-17T17:01:11+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=catchimage&
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000238s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000371s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000406s ]
SQL: SHOW COLUMNS FROM `my_attachment` [ RunTime:0.0205s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000426s ]
INFO: [ app_end ] --END-- [ RunTime:0.000460s ]

[ 2020-04-17T17:02:41+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000256s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000306s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000341s ]
NOTIC: [8] Undefined offset: 2 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1762 行.
NOTIC: [8] Undefined offset: 2 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1763 行.
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0013s ]
SQL: INSERT INTO `my_article` (`title`,`jumpurl`,`cid`,`litpic`,`keywords`,`tag`,`description`,`author`,`copyfrom`,`content`,`publishtime`,`commentflag`,`status`,`shorttitle`,`updatetime`,`click`,`aid`,`flag`) VALUES ('【实战】Tp5+小程序(三)--微信登录与令牌','','44','','','','小南源码ThinkPHP5 从入门到深入学习，结合实战项目深入理解 ThinkPHP5 的特性和使用方法。深入学习 api 开发，学习微信登录和令牌的相关知识，并理解微信登录流程，完成与微信开放 api 之间的数据交互，完善项目的相应功能。','管理员','','<p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><a href=\"http://ym.cxzch.cn/\" target=\"_self\">小南源码</a>ThinkPHP5 从入门到深入学习，结合实战项目深入理解 ThinkPHP5 的特性和使用方法。深入学习 api 开发，学习微信登录和令牌的相关知识，并理解微信登录流程，完成与微信开放 api 之间的数据交互，完善项目的相应功能。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">理解第三方登录授权的 code 和 token 交互过程。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-1 初识 Token - 意义与作用</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">说明：目前这种情况下，用户只要知道了系统的接口的形式，就可以直接访问，并获取数据，而大多数情况下，我们需要对用户身份进行验证，如：需要用户登录后才能访问的接口，以及需要管理员才能访问的接口等。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取令牌</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">客户端=》(账号、密码)=》getToken&nbsp;《==》&nbsp;账号、密码、Token、Auth</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">描述：客户端携带账号和密码信息，调用<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">getToken</code>接口，经过处理验证后，返回账号、密码、Token、Auth 等信息。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.访问接口</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">客户端=》(Token)=》下单接口&nbsp;《==》&nbsp;账号、密码、Token、Auth</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">验证：1.是否合法 2.是否有效 3.是否有操作权限</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.上面两个过程的 getToken 接口和下单接口就是被保护的接口，需要验证通过才能让用户访问。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-2 微信登录流程</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.微信身份登录体系</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">![微信登录流程](</p><p><span style=\"box-sizing: border-box; list-style: inherit;\"><img title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' src=\"https://ask.qcloudimg.com/http-save/yehe-2737545/68n5o9iedj.jpeg?imageView2/2/w/1620\" class=\"\"/></span></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.Token 在接口验证时的使用流程</p><p><span style=\"box-sizing: border-box; list-style: inherit;\"><img title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' src=\"https://ask.qcloudimg.com/http-save/yehe-2737545/9e57h42pox.jpeg?imageView2/2/w/1620\" class=\"\"/></span></p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-3 实现 Token 身份权限体系</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取 token 的请求使用 post 方法[安全性方面考虑]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.将复杂的业务分层到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">service</code>层[实现分层思想]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">使用模型处理数据库 CRUD 相关的操作，对于不操作数据库的复杂业务，将其封装到 Service 目录下，实现分层处理的思想，Service 层是在 Model 层之上的业务层。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.基础实现</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1）控制器的定义</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token&nbsp;[注意命名空间]public&nbsp;function&nbsp;getToken($code&nbsp;=&nbsp;&#39;&#39;)&nbsp;{}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2）路由定义</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;route.phpRoute::post(&#39;api/:version/token/user&#39;,&nbsp;&#39;api/:version.Token/getToken&#39;);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3）验证器校验</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token(new&nbsp;TokenGet())-&gt;goCheck();</pre><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/validate/TokenGetprotected&nbsp;$rule&nbsp;=&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;在验证器基类中定义isNotEmpty()方法
&nbsp;&nbsp;&nbsp;&nbsp;&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;require|isNotEmpty&#39;];protected&nbsp;$message&nbsp;=&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;code必填！&#39;];</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-4/5/6/7 实现 Token 身份权限体系</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取微信生成的 code 码，并将其作为参数，传递给微信接口来获得 openid 和 access_token 等相关信息[openid/session_key]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token$userToken&nbsp;=&nbsp;new&nbsp;UserToken($code);$token&nbsp;=&nbsp;$userToken-&gt;get();</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box; list-style: inherit;\">2.封装 Service 层，实现 Token 令牌的获取</strong>[重点]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1） 配置微信小程序相关参数[app_id app_secret login_url]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.1.1 在配置文件中设置微信小程序的相关参数</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;config/extra/wx.phpreturn&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;app_id&#39;&nbsp;=&gt;&nbsp;&#39;XXXXXXXXX&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;app_secret&#39;&nbsp;=&gt;&nbsp;&#39;XXXXXXXXX&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;login_url&#39;&nbsp;=&gt;&nbsp;&quot;https://api.weixin.qq.com/sns/jscode2session?&quot;&nbsp;.&nbsp;&quot;appid=%s&amp;secret=%s&amp;js_code=%s&amp;grant_type=authorization_code&quot;];</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.1.2 创建 Service 层的 UserToken 处理类，定义参数为私有属性</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpnamespace&nbsp;app\\api\\service;use&nbsp;app\\lib\\exception\\WechatException;use&nbsp;app\\lib\\exception\\TokenException;class&nbsp;UserToken&nbsp;extends&nbsp;Token{
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$code;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$appid;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$appSecret;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$loginUrl;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2） 拼接参数，并使用 curl 模拟 http 请求微信服务器，并获取返回结果</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phppublic&nbsp;function&nbsp;__construct($code){
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$code;
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;config(&#39;wx.app_id&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appSecret&nbsp;=&nbsp;config(&#39;wx.app_secret&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;loginUrl&nbsp;&nbsp;=&nbsp;sprintf(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config(&#39;wx.login_url&#39;),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appid,&nbsp;$this-&gt;appSecret,&nbsp;$this-&gt;code&nbsp;&nbsp;&nbsp;&nbsp;);}public&nbsp;function&nbsp;get(){
&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;curl_get($this-&gt;loginUrl);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">在公共方法文件中定义 curl 模拟 http 请求的方法：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;application/common.phpfunction&nbsp;curl_get($url,&nbsp;&amp;$httpCode&nbsp;=&nbsp;0){
&nbsp;&nbsp;&nbsp;&nbsp;//1、初始化curl
&nbsp;&nbsp;&nbsp;&nbsp;$curl&nbsp;=&nbsp;curl_init();

&nbsp;&nbsp;&nbsp;&nbsp;//2、告诉curl,请求的地址
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_URL,&nbsp;$url);
&nbsp;&nbsp;&nbsp;&nbsp;//3、将请求的数据返回，而不是直接输出
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;true);

&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;0);
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_CONNECTTIMEOUT,&nbsp;10);

&nbsp;&nbsp;&nbsp;&nbsp;$fileContents&nbsp;=&nbsp;curl_exec($curl);&nbsp;//&nbsp;执行操作
&nbsp;&nbsp;&nbsp;&nbsp;curl_close($curl);&nbsp;//&nbsp;关键CURL会话

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$fileContents;&nbsp;//&nbsp;返回数据}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3） 请求微信接口失败[微信内部错误/程序编写出错]的异常处理</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;get()$wxResult&nbsp;=&nbsp;json_decode($result,&nbsp;true);if&nbsp;(empty($wxResult))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;经验总结得：如果返回的结果为空[没有返回错误信息和错误代码]，则是微信服务器接口的问题，直接抛出异常一颗
&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;\\Exception(&#39;获取session_key及openID异常，微信内部错误&#39;);}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;$loginFail&nbsp;=&nbsp;isset($wxResult[&#39;errcode&#39;]);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;程序传递的参数出错时，微信服务器会返回错误码和错误提示信息
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($loginFail)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;processLoginErr($wxResult);
&nbsp;&nbsp;&nbsp;&nbsp;}}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">调用微信 Token 请求接口调用出错时的处理：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;processLoginErr($wxResult){
&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;WechatException(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$wxResult[&#39;errmsg&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;$wxResult[&#39;errcode&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]
&nbsp;&nbsp;&nbsp;&nbsp;);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">4） <strong style=\"box-sizing: border-box; list-style: inherit;\">成功获取微信接口返回数据后的操作[存储 openid、生成令牌、写入缓存、返回令牌]</strong></p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;get()return&nbsp;$this-&gt;grantToken($wxResult);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.1 存储 openid</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;grantToken($wxResult){
&nbsp;&nbsp;&nbsp;&nbsp;$now&nbsp;=&nbsp;time();
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.拿到openid
&nbsp;&nbsp;&nbsp;&nbsp;$openid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$wxResult[&#39;openid&#39;];
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$sessionKey&nbsp;=&nbsp;$wxResult[&#39;session_key&#39;];

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.查看数据库中该openid的记录是否已经存在[同一个用户的openid始终保持不变]
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;model(&#39;user&#39;)-&gt;getByOpenId($openid);

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.如果存在，则不处理；&nbsp;如果不存在，那么新增一条user记录
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($user)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uid&nbsp;=&nbsp;$user-&gt;id;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uid&nbsp;=&nbsp;$this-&gt;newUser($openid);
&nbsp;&nbsp;&nbsp;&nbsp;}}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">根据 openid 查询是否已经存在该用户</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/model/User.phppublic&nbsp;static&nbsp;function&nbsp;getByOpenId($openid){
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;self::where(&#39;openid&#39;,&nbsp;&#39;=&#39;,&nbsp;$openid)-&gt;find();

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$user;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">创建用户</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;newUser($openid){
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;model(&#39;user&#39;)-&gt;create([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;openid&#39;&nbsp;=&gt;&nbsp;$openid&nbsp;&nbsp;&nbsp;&nbsp;]);

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$user-&gt;id;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.2 准备缓存数据(缓存的值)</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">[微信返回数据(openid|session_key) + uid(用户服务器中保存的用户记录 id) + scope(用户权限，值越大，权限越高) ]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.生成令牌，准备缓存数据，写入缓存&nbsp;[获取用户的相关信息]//&nbsp;4.1&nbsp;准备缓存数据$cachedValue&nbsp;=&nbsp;$this-&gt;prepareCachedValue($wxResult,&nbsp;$uid);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">准备缓存数据值的方法[缓存的值]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;prepareCachedValue($wxResult,&nbsp;$uid){
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue&nbsp;=&nbsp;$wxResult;
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue[&#39;uid&#39;]&nbsp;=&nbsp;$uid;
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue[&#39;scope&#39;]&nbsp;=&nbsp;16;&nbsp;//&nbsp;数值越大，权限越多

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$cachedValue;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3 写入缓存[令牌+微信返回数据+有效期]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.2&nbsp;写入缓存，并返回令牌$token&nbsp;=&nbsp;$this-&gt;saveToCache($cachedValue);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.1 生成令牌(缓存的键) [随机字符串+时间戳+盐]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;令牌是用户程序生成的随机字符串，与微信服务器无关//&nbsp;api/service/UserToken.php&nbsp;&nbsp;saveToCache()$key&nbsp;=&nbsp;self::generateToken();</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">在服务器层构建 Token 基类，处理用户登录 Token 和后续的其他 Token 信息[service 下 UserToken 继承该基类]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/Token.phppublic&nbsp;static&nbsp;function&nbsp;generateToken(){
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;用三组字符串，进行md5加密&nbsp;[加强安全性]
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.32个字符组成一组随机字符串
&nbsp;&nbsp;&nbsp;&nbsp;$randChars&nbsp;=&nbsp;getRandChar(32);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.时间戳
&nbsp;&nbsp;&nbsp;&nbsp;$timestamp&nbsp;=&nbsp;$_SERVER[&#39;REQUEST_TIME_FLOAT&#39;];
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.盐
&nbsp;&nbsp;&nbsp;&nbsp;$salt&nbsp;=&nbsp;config(&#39;secure.token_salt&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;md5($randChars.$timestamp.$salt);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">公共方法中定义生成指定长度的随机字符串</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;application/common.phpfunction&nbsp;getRandChar($length){
&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;null;
&nbsp;&nbsp;&nbsp;&nbsp;$strPol&nbsp;=&nbsp;&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;$max&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;strlen($strPol)&nbsp;-&nbsp;1;

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i&nbsp;=&nbsp;0;&nbsp;$i&nbsp;&lt;&nbsp;$length;&nbsp;$i++)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;$strPol[rand(0,&nbsp;$max)];
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$str;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">创建安全配置文件[盐：随机字符串]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;extra/secure.phpreturn&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;token_salt&#39;&nbsp;=&gt;&nbsp;&#39;E7epHZhrTfgQ&#39;];</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.2 配置文件中设置 cache 缓存的有效期</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">创建安全配置文件[盐：随机字符串]```php//&nbsp;extra/setting.php&#39;token_expire_in&#39;&nbsp;=&gt;&nbsp;7200</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.3 创建缓存文件</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">private&nbsp;function&nbsp;saveToCache($cachedValue){
&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;self::generateToken();
&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;json_encode($cachedValue);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;设置缓存失效时间
&nbsp;&nbsp;&nbsp;&nbsp;$expire_in&nbsp;=&nbsp;config(&#39;setting.token_expire_in&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;cache($key,&nbsp;$value,&nbsp;$expire_in);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$request)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;令牌缓存出错
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;TokenException([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;服务器缓存异常&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;10005
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$key;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.4 返回令牌</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.3&nbsp;写入缓存，并返回令牌return&nbsp;$token;</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.异常处理类</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.1 微信内部错误[直接抛出异常]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.2 微信接口调用出错[微信相关异常处理类 WechatException]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">class&nbsp;WechatException&nbsp;extends&nbsp;BaseException{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$code&nbsp;=&nbsp;404;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$msg&nbsp;=&nbsp;&#39;微信服务器接口调用失败&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$errorCode&nbsp;=&nbsp;999;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.3 缓存 Token 出错[Token 异常处理类 TokenException]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">class&nbsp;TokenException&nbsp;extends&nbsp;BaseException{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$code&nbsp;=&nbsp;401;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$msg&nbsp;=&nbsp;&#39;Token已过期或无效Token&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$errorCode&nbsp;=&nbsp;10001;}</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-8 获取请求参数 code 并调用 PHP 接口[借助微信开发工具]</h3><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.微信开发者工具中配置：</h4><blockquote style=\"box-sizing: border-box; list-style: inherit; margin: 0px 0px 24px; padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px;\">设置好 app_key 后，需要将 “详情” 中的 “不校验合法域名、web-view(业务域名)、TLS 版本以及 HTTPS 证书” 勾选上（在本地测试，没有远程访问的服务器或远程服务器访问的域名没有 https 证书）</p></blockquote><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.小程序代码：</h4><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 在 config 中定义 restUrl</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;Protoss/utils/config.js&nbsp;[设置本地测试的域名基地址]Config.restUrl&nbsp;=&nbsp;&quot;http://mypro.com/api/v1/&quot;;</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2)在登录方法中获取 code</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;在小程序登录调用wx.login()方法中输出code，然后使用接口请求工具将code作为post请求的参数，进行调用//&nbsp;Protoss/utils/token.js&nbsp;getTokenFromServer()wx.login({
&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;code:&nbsp;&quot;&nbsp;+&nbsp;res.code);
&nbsp;&nbsp;}});</pre><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.请求 PHP 接口获取 Token</h4><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;引用使用es6的module引入和定义//&nbsp;全局变量以g_开头//&nbsp;私有函数以_开头import&nbsp;{&nbsp;Config&nbsp;}&nbsp;from&nbsp;&quot;config.js&quot;;class&nbsp;Token&nbsp;{
&nbsp;&nbsp;constructor()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;this.tokenUrl&nbsp;=&nbsp;Config.restUrl&nbsp;+&nbsp;&quot;token/user&quot;;
&nbsp;&nbsp;}

&nbsp;&nbsp;verify()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;token&nbsp;=&nbsp;wx.getStorageSync(&quot;token&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!token)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getTokenFromServer();
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}

&nbsp;&nbsp;getTokenFromServer(callBack)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;that&nbsp;=&nbsp;this;
&nbsp;&nbsp;&nbsp;&nbsp;wx.login({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;code:&nbsp;&quot;&nbsp;+&nbsp;res.code);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wx.request({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;that.tokenUrl,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&quot;POST&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code:&nbsp;res.code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;token：&nbsp;&quot;&nbsp;+&nbsp;res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wx.setStorageSync(&quot;token&quot;,&nbsp;res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callBack&nbsp;&amp;&amp;&nbsp;callBack(res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;});
&nbsp;&nbsp;}}export&nbsp;{&nbsp;Token&nbsp;};</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box; list-style: inherit;\">【补充说明】</strong>：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 需要调试时，将 XDEBUG 参数拼接到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">this.tokenUrl</code>即可</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2) 如果没有输出 code, 需要关闭开发者工具后再重新启动，会自动调用该方法，并输出 code
 [调用过生成的 token 已经被存储到浏览器的 Storage 中，便不会再调用 Token 请求接口，从而不产生 code]</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-9 商品详情接口</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 定义控制器方法 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">getOne($id)</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2) 定义路由 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">api/:version/product/:id</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(3) 模型类实现[隐藏部分字段、设置数据表关联、实现数据库查询]</p><blockquote style=\"box-sizing: border-box; list-style: inherit; margin: 0px 0px 24px; padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px;\">Product =&gt; properties =&gt; ProductProperty =&gt; 商品属性值[品名、口味、产地、保质期]
 Product =&gt; imgs =&gt; Image =&gt; 商品主图
 ProductImage =&gt; imgs.imgUrl =&gt; Image =&gt; 商品详情图</p></blockquote><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(4) 异常处理信息提示</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&#39;当前产品无详情&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;20001]</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-10-1 路由变量规则</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.路由匹配规则在项目中的应用。</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">Route::get(&#39;api/:version/product/recent&#39;,&nbsp;&#39;api/:version.Product/getRecent&#39;);Route::get(&#39;api/:version/product/:id&#39;,&nbsp;&#39;api/:version.Product/getOne&#39;);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.存在的问题</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">目前调用接口都不存在问题，但是当将<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">:id</code>行放到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">recent</code>行之前后，在调用<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">recent</code>路由时，则会因为优先匹配<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">:id</code>对应的路由，
 此时则会因为参数校验不通过而报错。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.解决之道：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">对路由匹配规则进行限定，设置变量规则，对于<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">:id</code>行，限定只有当参数为数值时才匹配到当前行。即设置 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">$id</code>的变量规则</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">变量规则：为变量用正则的方式指定变量规则，弥补了动态变量无法限制具体的类型问题，并且支持全局规则设置。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">4.代码实现[设置变量规则]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">Route::get(&#39;api/:version/product/:id&#39;,&nbsp;&#39;api/:version.Product/getOne&#39;,&nbsp;[],&nbsp;[&#39;id&#39;=&gt;&#39;\\d+&#39;]);</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-10-2 路由分组</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">对路由配置文件中，具有相同路由前缀的路由归为同一路由组，例如：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">对于几个对应产品信息的路由，</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">Route::get(&#39;api/:version/product/recent&#39;,&nbsp;&#39;api/:version.Product/getRecent&#39;);Route::get(&#39;api/:version/product/by_category&#39;,&nbsp;&#39;api/:version.Product/getAllInCategory&#39;);Route::get(&#39;api/:version/product/:id&#39;,&nbsp;&#39;api/:version.Product/getOne&#39;);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">可以分组到产品组路由下，</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;闭包方式注册路由分组Route::group(&#39;api/:version/product&#39;,&nbsp;function()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;Route::get(&#39;recent&#39;,&nbsp;&#39;api/:version.Product/getRecent&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;Route::get(&#39;by_category&#39;,&nbsp;&#39;api/:version.Product/getAllInCategory&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;Route::get(&#39;:id&#39;,&nbsp;&#39;api/:version.Product/getOne&#39;,&nbsp;[],&nbsp;[&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;\\d+&#39;]);});</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">或者：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;数组方式注册路由分组Route::group(&#39;api/:version/product&#39;,&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;recent&#39;&nbsp;=&gt;&nbsp;[&#39;api/:version.Product/getRecent&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&#39;by_category&#39;&nbsp;=&gt;&nbsp;[&#39;api/:version.Product/getAllInCategory&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&#39;:id&#39;&nbsp;=&gt;&nbsp;[&#39;api/:version.Product/getOne&#39;,&nbsp;[],&nbsp;[&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;\\d+&#39;]]],[&#39;method&#39;&nbsp;=&gt;&nbsp;&#39;get&#39;]);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">路由分组的方式定义路由，执行的效率会比一般形式高一点。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">【注】路由分组的公共路由定义时，不能在末尾加<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">/</code>，否则会报控制器不存在的错误</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-11 闭包函数构建查询器</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.完成的商品详情的数据信息格式为：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">{&quot;id&quot;:&nbsp;11,&quot;name&quot;:&nbsp;&quot;贵妃笑&nbsp;100克&quot;,&quot;price&quot;:&nbsp;&quot;0.01&quot;,&quot;stock&quot;:&nbsp;994,&quot;main_img_url&quot;:&nbsp;&quot;http://mypro.com/static/images/product-dryfruit-a@6.png&quot;,&quot;summary&quot;:&nbsp;null,&quot;img_id&quot;:&nbsp;39,&quot;imgs&quot;:[
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;4,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;order&quot;:&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;img_url&quot;:{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;url&quot;:&nbsp;&quot;http://mypro.com/static/images/detail-1@1-dryfruit.png&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;5,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;order&quot;:&nbsp;2,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;img_url&quot;:{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;url&quot;:&nbsp;&quot;http://mypro.com/static/images/detail-2@1-dryfruit.png&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;},],&quot;properties&quot;:[
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;id&quot;:&nbsp;1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;&quot;品名&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;detail&quot;:&nbsp;&quot;杨梅&quot;
&nbsp;&nbsp;&nbsp;&nbsp;},]}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.问题：其中<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">imgs</code>的值为每个商品下的所有图片介绍，所以所有图片之间一定存在一定的顺序，其中<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">imgs</code>数组下的数据中存在<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">order</code>排序字段，如何对<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">imgs</code>的数据通过<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">order</code>进行排序？</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.【答】：使用闭包函数构建查询器【相当于拼接 sql】。</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">$product&nbsp;=&nbsp;self::with([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;imgs&#39;&nbsp;=&gt;&nbsp;function($query)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$query-&gt;with([&#39;imgUrl&#39;])-&gt;order(&#39;order&nbsp;asc&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;])
&nbsp;&nbsp;&nbsp;&nbsp;-&gt;with([&#39;properties&#39;])
&nbsp;&nbsp;&nbsp;&nbsp;-&gt;find($id);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">4.思路分析：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（1）要对 imgs 下的数据进行处理，需要获取到每组数据，然后对<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">order</code>字段进行排序。【通过闭包函数获取到每组数据】</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（2）除了要对每组数据进行按<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">order</code>排序，还需要处理<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">img_url</code>。【通过 with 链式操作处理<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">img_url</code>】</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">5.关于闭包函数的理解：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">&#39;imgs&#39;&nbsp;=&gt;&nbsp;function($query)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;$query-&gt;with([&#39;imgUrl&#39;])-&gt;order(&#39;order&nbsp;asc&#39;);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">对于数组<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">imgs</code>，通过闭包函数，获取到每组数据，其中<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">$query</code>即作为参数接收每组数据的值，然后再对每组数据的<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">img_url</code>通过 with 进行数据关联。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12 用户收货地址</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.需求说明：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">用户收货地址接口信息需要进行身份验证，登录用户只能查看和操作自己的地址信息，未登录用户不能访问。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">为简化操作，当前将用户和用户地址的关联关系设定为一对一。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.思考点：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（1）对登录状态的判断：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">当用户访问小程序时，调用<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">wx.login()</code>方法，并生成<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">code</code>,后台接口拿到 code 后生成 token，并用 token 以及配置的<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">app_id</code>和<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">app_secret</code>请求微信接口，并获取微信返回的<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">openid</code>等信息，存储到缓存中
 [以 token 为键，uid|wxResult|scope 组成的 json 数据为值]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">所以，创建或修改用户地址信息时，在处理地址信息和用户信息的关联时，使用的用户信息，应当是当前登录用户的信息，而不能是客户端传递的用户信息参数[可能传递有误，导致误操作到其他用户的地址信息]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">实现一定程度上的接口保护。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（2）传入参数的检验</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">验证器校验往往只能验证某个字段或某些字段的合法性，而客户端可能传入的参数比需要的参数多，或者传入了<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">uid</code>或者<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">user_id</code>，导致更新时覆盖了其他用户的数据信息，对系统的安全性造成影响，
 所以，在接收客户端传入参数时，需要进行多余字段的过滤。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（3）对手机号的验证</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">正则表达式的应用场景，正则模式<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">^1(3|4|5|6|7|8)[0-9]\\d{8}$^</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（4）<strong style=\"box-sizing: border-box; list-style: inherit;\">通过模型关联，实现用户地址的新增和更新</strong>【新】</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">通过关联模型方法，创建数据</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;新增$user-&gt;address()-&gt;save($dataArray);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">通过关联模型属性，对当前属性对应的记录进行更新</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;更新$user-&gt;address-&gt;save($dataArray);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（5）模型关联方法的选择：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">模型关联方法的区分：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">有主键关联无主键&nbsp;=》&nbsp;belongsTo
无主键关联有主键&nbsp;=》&nbsp;hasOne|hasMany</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（6）HTTP 状态码</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">200：操作成功，服务器已成功处理了请求。说明：<a href=\"https://blog.csdn.net/u014028956/article/details/47125403\" target=\"_blank\" style=\"text-decoration-line: none; box-sizing: border-box; list-style: inherit; color: rgb(0, 164, 255);\">如果是对您的 robots.txt 文件显示此状态码，则表示 Googlebot 已成功检索到该文件</a></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">201：创建成功，表示服务器执行成功，并且创建了新的资源</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">设置接口调用成功后的状态码标识：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">return&nbsp;json(new&nbsp;SuccessMessage(),&nbsp;201);</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12-1 通过令牌获取用户标识</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1)定义控制器方法 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">createOrUpdate()</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2)定义路由 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">api/:version/address</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(3)验证器验证用户输入数据 [<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">name</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">mobile</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">province</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">city</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">country</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">detail</code>]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(4)异常处理信息提示</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">当数据不合法时抛出异常，而当操作成功时，也需要返回相应的数据信息。当前项目将抛出的成功信息也放在异常处理类库下。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12-2 面向对象的方式封装获取 uid 方法</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.通过令牌 token 即可获取缓存中对应的用户信息，而缓存中的信息包括<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">uid</code> <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">scope</code> <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">wxResult</code>[<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">openid</code> <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">session_key</code>]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">而在 http 请求时，token 保存在 header 头信息中，获取头信息中<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">token</code>的方法：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">$token = Request::instance()-&gt;header(&#39;token&#39;);</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.通过 json 键值对的键，获取 cache 数据</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">Cache::get($token)</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.增强项目的扩展性，可将通过 token 获取变量的方法进行封装。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">4.代码实现：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">public&nbsp;static&nbsp;function&nbsp;getCurrentTokenVar($key){
&nbsp;&nbsp;&nbsp;&nbsp;$token&nbsp;=&nbsp;Request::instance()-&gt;header(&#39;token&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$vars&nbsp;&nbsp;=&nbsp;Cache::get($token);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;$vars)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;TokenException();
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_array($vars))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$vars&nbsp;=&nbsp;json_decode($vars,&nbsp;true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($vars[$key]))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$vars[$key];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;Exception(&#39;尝试获取的Token变量不存在&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}}public&nbsp;static&nbsp;function&nbsp;getCurrentUid(){
&nbsp;&nbsp;&nbsp;&nbsp;$uid&nbsp;=&nbsp;self::getCurrentTokenVar(&#39;uid&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$uid;}</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12-3 模型新增和更新</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">通过用户模型，进行面向对象方式的新增和更新</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（1）user 模型定义 address()关联方法，获取到用户地址信息，当用户地址信息不存在时，也通过<strong style=\"box-sizing: border-box; list-style: inherit;\">关联模型方法</strong>，保存地址信息</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;新增$user-&gt;address()-&gt;save($dataArray);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">（2）user 模型通过 address()关联方法关联 user_address 数据表中对应的用户地址信息，通过关联获取的数据仍然可以作为模型的属性值使用，
 再通过<strong style=\"box-sizing: border-box; list-style: inherit;\">关联模型属性</strong>，对当前属性对应的记录进行更新 [包含主键 id]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;更新$user-&gt;address-&gt;save($dataArray);</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12-4 参数过滤</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">封装处理客户端传入的参数的方法，由于当前用户的信息是通过缓存获取的，为避免用户传入的参数造成错误修改，所以需要对客户端传入数据进行过滤，
 如果携带用户 id 参数，则抛出异常，不再继续处理。除此之外，对于传入的无效、多余数据，进行过滤，仅接收验证器需要验证的字段信息。</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">public&nbsp;function&nbsp;getDataByRule($params){
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($params[&#39;uid&#39;])&nbsp;||&nbsp;isset($params[&#39;user_id&#39;]))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ParameterException([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;参数中包含非法的参数名user_id或者uid&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;$newArray&nbsp;=&nbsp;[];
&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($this-&gt;rule&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newArray[$key]&nbsp;=&nbsp;$params[$key];
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$newArray;}</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-12-5 接口测试</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.需要的参数</p><ul class=\"ul-level-0 list-paddingleft-2\" style=\"list-style-type: none;\"><li><p>token: header 请求头 [通过微信小程序的开发者工具]</p></li><li><p>address 字段信息 [<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">name</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">mobile</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">province</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">city</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">country</code>, <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">detail</code>]</p></li></ul><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.返回的数据</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">{
&nbsp;&nbsp;&quot;code&quot;:&nbsp;201,
&nbsp;&nbsp;&quot;msg&quot;:&nbsp;&quot;ok&quot;,
&nbsp;&nbsp;&quot;errorCode&quot;:&nbsp;0}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">并且通过设置返回值为带状态码的 json 数据，<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">json(new SuccessMessage(), 201)</code>，可将 http 的状态码也设置为<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">201</code></p><p><br/></p>','1587114011','1','1','','1587114161','0','1','6') [ RunTime:0.0035s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000043s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000084s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.003898s ]
INFO: [ view_parse ] --END-- [ RunTime:0.003944s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000121s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000143s ]

[ 2020-04-17T17:02:42+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000247s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000288s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000319s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0011s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0007s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0007s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000068s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000113s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.019531s ]
INFO: [ view_parse ] --END-- [ RunTime:0.019559s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000132s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000154s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000318s ]
INFO: [ app_end ] --END-- [ RunTime:0.000348s ]

[ 2020-04-17T17:03:03+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/edit/id/578/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000249s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000327s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000364s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0011s ]
SQL: SELECT * FROM `my_article` WHERE `id` = 578 LIMIT 1   [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000072s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
NOTIC: [8] Undefined index: downlink /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/265907633962d780ff7abbe5a5f15f58.php 第 287 行.
NOTIC: [8] Undefined index: video /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/265907633962d780ff7abbe5a5f15f58.php 第 294 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/265907633962d780ff7abbe5a5f15f58.php 第 352 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.019047s ]
INFO: [ view_parse ] --END-- [ RunTime:0.019085s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000126s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000149s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000374s ]
INFO: [ app_end ] --END-- [ RunTime:0.000403s ]

[ 2020-04-17T17:03:04+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=config&&noCache=1587114254678
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000231s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000316s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000348s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000320s ]
INFO: [ app_end ] --END-- [ RunTime:0.000351s ]

[ 2020-04-17T17:03:14+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/edit
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000263s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000299s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000334s ]
NOTIC: [8] Undefined offset: 2 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1762 行.
NOTIC: [8] Undefined offset: 2 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1763 行.
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0012s ]
SQL: UPDATE `my_article` SET `title`='【实战】Tp5+小程序(三)--微信登录与令牌',`jumpurl`='',`cid`='44',`litpic`='',`keywords`='【实战】Tp5+小程序(三)--微信登录与令牌',`tag`='',`description`='小南源码ThinkPHP5 从入门到深入学习，结合实战项目深入理解 ThinkPHP5 的特性和使用方法。深入学习 api 开发，学习微信登录和令牌的相关知识，并理解微信登录流程，完成与微信开放 api 之间的数据交互，完善项目的相应功能。',`author`='管理员',`copyfrom`='',`content`='<p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><a href=\"http://ym.cxzch.cn/\" target=\"_self\">小南源码</a>ThinkPHP5 从入门到深入学习，结合实战项目深入理解 ThinkPHP5 的特性和使用方法。深入学习 api 开发，学习微信登录和令牌的相关知识，并理解微信登录流程，完成与微信开放 api 之间的数据交互，完善项目的相应功能。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">理解第三方登录授权的 code 和 token 交互过程。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-1 初识 Token - 意义与作用</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">说明：目前这种情况下，用户只要知道了系统的接口的形式，就可以直接访问，并获取数据，而大多数情况下，我们需要对用户身份进行验证，如：需要用户登录后才能访问的接口，以及需要管理员才能访问的接口等。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取令牌</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">客户端=》(账号、密码)=》getToken&nbsp;《==》&nbsp;账号、密码、Token、Auth</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">描述：客户端携带账号和密码信息，调用<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">getToken</code>接口，经过处理验证后，返回账号、密码、Token、Auth 等信息。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.访问接口</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">客户端=》(Token)=》下单接口&nbsp;《==》&nbsp;账号、密码、Token、Auth</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">验证：1.是否合法 2.是否有效 3.是否有操作权限</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.上面两个过程的 getToken 接口和下单接口就是被保护的接口，需要验证通过才能让用户访问。</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-2 微信登录流程</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.微信身份登录体系</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">![微信登录流程](</p><p><span style=\"box-sizing: border-box; list-style: inherit;\"><img title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\"【实战】Tp5+小程序(三)--微信登录与令牌\" alt=\"【实战】Tp5+小程序(三)--微信登录与令牌\" src=\"https://ask.qcloudimg.com/http-save/yehe-2737545/68n5o9iedj.jpeg?imageView2/2/w/1620\" class=\"\"/></span></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.Token 在接口验证时的使用流程</p><p><span style=\"box-sizing: border-box; list-style: inherit;\"><img title=\'【实战】Tp5+小程序(三)--微信登录与令牌\' alt=\'【实战】Tp5+小程序(三)--微信登录与令牌\' title=\"【实战】Tp5+小程序(三)--微信登录与令牌\" alt=\"【实战】Tp5+小程序(三)--微信登录与令牌\" src=\"https://ask.qcloudimg.com/http-save/yehe-2737545/9e57h42pox.jpeg?imageView2/2/w/1620\" class=\"\"/></span></p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-3 实现 Token 身份权限体系</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取 token 的请求使用 post 方法[安全性方面考虑]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.将复杂的业务分层到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">service</code>层[实现分层思想]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">使用模型处理数据库 CRUD 相关的操作，对于不操作数据库的复杂业务，将其封装到 Service 目录下，实现分层处理的思想，Service 层是在 Model 层之上的业务层。</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.基础实现</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1）控制器的定义</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token&nbsp;[注意命名空间]public&nbsp;function&nbsp;getToken($code&nbsp;=&nbsp;&#39;&#39;)&nbsp;{}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2）路由定义</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;route.phpRoute::post(&#39;api/:version/token/user&#39;,&nbsp;&#39;api/:version.Token/getToken&#39;);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3）验证器校验</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token(new&nbsp;TokenGet())-&gt;goCheck();</pre><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/validate/TokenGetprotected&nbsp;$rule&nbsp;=&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;在验证器基类中定义isNotEmpty()方法
&nbsp;&nbsp;&nbsp;&nbsp;&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;require|isNotEmpty&#39;];protected&nbsp;$message&nbsp;=&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;code&#39;&nbsp;=&gt;&nbsp;&#39;code必填！&#39;];</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-4/5/6/7 实现 Token 身份权限体系</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.获取微信生成的 code 码，并将其作为参数，传递给微信接口来获得 openid 和 access_token 等相关信息[openid/session_key]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/controller/v1/Token$userToken&nbsp;=&nbsp;new&nbsp;UserToken($code);$token&nbsp;=&nbsp;$userToken-&gt;get();</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box; list-style: inherit;\">2.封装 Service 层，实现 Token 令牌的获取</strong>[重点]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1） 配置微信小程序相关参数[app_id app_secret login_url]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.1.1 在配置文件中设置微信小程序的相关参数</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;config/extra/wx.phpreturn&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;app_id&#39;&nbsp;=&gt;&nbsp;&#39;XXXXXXXXX&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;app_secret&#39;&nbsp;=&gt;&nbsp;&#39;XXXXXXXXX&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;login_url&#39;&nbsp;=&gt;&nbsp;&quot;https://api.weixin.qq.com/sns/jscode2session?&quot;&nbsp;.&nbsp;&quot;appid=%s&amp;secret=%s&amp;js_code=%s&amp;grant_type=authorization_code&quot;];</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.1.2 创建 Service 层的 UserToken 处理类，定义参数为私有属性</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpnamespace&nbsp;app\\api\\service;use&nbsp;app\\lib\\exception\\WechatException;use&nbsp;app\\lib\\exception\\TokenException;class&nbsp;UserToken&nbsp;extends&nbsp;Token{
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$code;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$appid;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$appSecret;
&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;$loginUrl;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2） 拼接参数，并使用 curl 模拟 http 请求微信服务器，并获取返回结果</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phppublic&nbsp;function&nbsp;__construct($code){
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$code;
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;config(&#39;wx.app_id&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appSecret&nbsp;=&nbsp;config(&#39;wx.app_secret&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;loginUrl&nbsp;&nbsp;=&nbsp;sprintf(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config(&#39;wx.login_url&#39;),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;appid,&nbsp;$this-&gt;appSecret,&nbsp;$this-&gt;code&nbsp;&nbsp;&nbsp;&nbsp;);}public&nbsp;function&nbsp;get(){
&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;curl_get($this-&gt;loginUrl);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">在公共方法文件中定义 curl 模拟 http 请求的方法：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;application/common.phpfunction&nbsp;curl_get($url,&nbsp;&amp;$httpCode&nbsp;=&nbsp;0){
&nbsp;&nbsp;&nbsp;&nbsp;//1、初始化curl
&nbsp;&nbsp;&nbsp;&nbsp;$curl&nbsp;=&nbsp;curl_init();

&nbsp;&nbsp;&nbsp;&nbsp;//2、告诉curl,请求的地址
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_URL,&nbsp;$url);
&nbsp;&nbsp;&nbsp;&nbsp;//3、将请求的数据返回，而不是直接输出
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;true);

&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;0);
&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_CONNECTTIMEOUT,&nbsp;10);

&nbsp;&nbsp;&nbsp;&nbsp;$fileContents&nbsp;=&nbsp;curl_exec($curl);&nbsp;//&nbsp;执行操作
&nbsp;&nbsp;&nbsp;&nbsp;curl_close($curl);&nbsp;//&nbsp;关键CURL会话

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$fileContents;&nbsp;//&nbsp;返回数据}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3） 请求微信接口失败[微信内部错误/程序编写出错]的异常处理</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;get()$wxResult&nbsp;=&nbsp;json_decode($result,&nbsp;true);if&nbsp;(empty($wxResult))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;经验总结得：如果返回的结果为空[没有返回错误信息和错误代码]，则是微信服务器接口的问题，直接抛出异常一颗
&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;\\Exception(&#39;获取session_key及openID异常，微信内部错误&#39;);}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;$loginFail&nbsp;=&nbsp;isset($wxResult[&#39;errcode&#39;]);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;程序传递的参数出错时，微信服务器会返回错误码和错误提示信息
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($loginFail)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;processLoginErr($wxResult);
&nbsp;&nbsp;&nbsp;&nbsp;}}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">调用微信 Token 请求接口调用出错时的处理：</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;processLoginErr($wxResult){
&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;WechatException(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$wxResult[&#39;errmsg&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;$wxResult[&#39;errcode&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]
&nbsp;&nbsp;&nbsp;&nbsp;);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">4） <strong style=\"box-sizing: border-box; list-style: inherit;\">成功获取微信接口返回数据后的操作[存储 openid、生成令牌、写入缓存、返回令牌]</strong></p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;get()return&nbsp;$this-&gt;grantToken($wxResult);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.1 存储 openid</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;grantToken($wxResult){
&nbsp;&nbsp;&nbsp;&nbsp;$now&nbsp;=&nbsp;time();
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.拿到openid
&nbsp;&nbsp;&nbsp;&nbsp;$openid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$wxResult[&#39;openid&#39;];
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;$sessionKey&nbsp;=&nbsp;$wxResult[&#39;session_key&#39;];

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.查看数据库中该openid的记录是否已经存在[同一个用户的openid始终保持不变]
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;model(&#39;user&#39;)-&gt;getByOpenId($openid);

&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.如果存在，则不处理；&nbsp;如果不存在，那么新增一条user记录
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($user)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uid&nbsp;=&nbsp;$user-&gt;id;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uid&nbsp;=&nbsp;$this-&gt;newUser($openid);
&nbsp;&nbsp;&nbsp;&nbsp;}}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">根据 openid 查询是否已经存在该用户</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/model/User.phppublic&nbsp;static&nbsp;function&nbsp;getByOpenId($openid){
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;self::where(&#39;openid&#39;,&nbsp;&#39;=&#39;,&nbsp;$openid)-&gt;find();

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$user;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">创建用户</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;newUser($openid){
&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;model(&#39;user&#39;)-&gt;create([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;openid&#39;&nbsp;=&gt;&nbsp;$openid&nbsp;&nbsp;&nbsp;&nbsp;]);

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$user-&gt;id;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.2 准备缓存数据(缓存的值)</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">[微信返回数据(openid|session_key) + uid(用户服务器中保存的用户记录 id) + scope(用户权限，值越大，权限越高) ]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.生成令牌，准备缓存数据，写入缓存&nbsp;[获取用户的相关信息]//&nbsp;4.1&nbsp;准备缓存数据$cachedValue&nbsp;=&nbsp;$this-&gt;prepareCachedValue($wxResult,&nbsp;$uid);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">准备缓存数据值的方法[缓存的值]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.phpprivate&nbsp;function&nbsp;prepareCachedValue($wxResult,&nbsp;$uid){
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue&nbsp;=&nbsp;$wxResult;
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue[&#39;uid&#39;]&nbsp;=&nbsp;$uid;
&nbsp;&nbsp;&nbsp;&nbsp;$cachedValue[&#39;scope&#39;]&nbsp;=&nbsp;16;&nbsp;//&nbsp;数值越大，权限越多

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$cachedValue;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3 写入缓存[令牌+微信返回数据+有效期]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.2&nbsp;写入缓存，并返回令牌$token&nbsp;=&nbsp;$this-&gt;saveToCache($cachedValue);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.1 生成令牌(缓存的键) [随机字符串+时间戳+盐]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;令牌是用户程序生成的随机字符串，与微信服务器无关//&nbsp;api/service/UserToken.php&nbsp;&nbsp;saveToCache()$key&nbsp;=&nbsp;self::generateToken();</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">在服务器层构建 Token 基类，处理用户登录 Token 和后续的其他 Token 信息[service 下 UserToken 继承该基类]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/Token.phppublic&nbsp;static&nbsp;function&nbsp;generateToken(){
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;用三组字符串，进行md5加密&nbsp;[加强安全性]
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;1.32个字符组成一组随机字符串
&nbsp;&nbsp;&nbsp;&nbsp;$randChars&nbsp;=&nbsp;getRandChar(32);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;2.时间戳
&nbsp;&nbsp;&nbsp;&nbsp;$timestamp&nbsp;=&nbsp;$_SERVER[&#39;REQUEST_TIME_FLOAT&#39;];
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3.盐
&nbsp;&nbsp;&nbsp;&nbsp;$salt&nbsp;=&nbsp;config(&#39;secure.token_salt&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;md5($randChars.$timestamp.$salt);}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">公共方法中定义生成指定长度的随机字符串</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;application/common.phpfunction&nbsp;getRandChar($length){
&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;null;
&nbsp;&nbsp;&nbsp;&nbsp;$strPol&nbsp;=&nbsp;&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;$max&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;strlen($strPol)&nbsp;-&nbsp;1;

&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i&nbsp;=&nbsp;0;&nbsp;$i&nbsp;&lt;&nbsp;$length;&nbsp;$i++)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;$strPol[rand(0,&nbsp;$max)];
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$str;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">创建安全配置文件[盐：随机字符串]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;extra/secure.phpreturn&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;token_salt&#39;&nbsp;=&gt;&nbsp;&#39;E7epHZhrTfgQ&#39;];</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.2 配置文件中设置 cache 缓存的有效期</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">创建安全配置文件[盐：随机字符串]```php//&nbsp;extra/setting.php&#39;token_expire_in&#39;&nbsp;=&gt;&nbsp;7200</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.3.3 创建缓存文件</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">private&nbsp;function&nbsp;saveToCache($cachedValue){
&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;self::generateToken();
&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;json_encode($cachedValue);
&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;设置缓存失效时间
&nbsp;&nbsp;&nbsp;&nbsp;$expire_in&nbsp;=&nbsp;config(&#39;setting.token_expire_in&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;cache($key,&nbsp;$value,&nbsp;$expire_in);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$request)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;令牌缓存出错
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;TokenException([
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;=&gt;&nbsp;&#39;服务器缓存异常&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;10005
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$key;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.4.4 返回令牌</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;api/service/UserToken.php&nbsp;&nbsp;grantToken()//&nbsp;4.3&nbsp;写入缓存，并返回令牌return&nbsp;$token;</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.异常处理类</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.1 微信内部错误[直接抛出异常]</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.2 微信接口调用出错[微信相关异常处理类 WechatException]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">class&nbsp;WechatException&nbsp;extends&nbsp;BaseException{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$code&nbsp;=&nbsp;404;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$msg&nbsp;=&nbsp;&#39;微信服务器接口调用失败&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$errorCode&nbsp;=&nbsp;999;}</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.3 缓存 Token 出错[Token 异常处理类 TokenException]</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">class&nbsp;TokenException&nbsp;extends&nbsp;BaseException{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$code&nbsp;=&nbsp;401;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$msg&nbsp;=&nbsp;&#39;Token已过期或无效Token&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$errorCode&nbsp;=&nbsp;10001;}</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-8 获取请求参数 code 并调用 PHP 接口[借助微信开发工具]</h3><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.微信开发者工具中配置：</h4><blockquote style=\"box-sizing: border-box; list-style: inherit; margin: 0px 0px 24px; padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px;\">设置好 app_key 后，需要将 “详情” 中的 “不校验合法域名、web-view(业务域名)、TLS 版本以及 HTTPS 证书” 勾选上（在本地测试，没有远程访问的服务器或远程服务器访问的域名没有 https 证书）</p></blockquote><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.小程序代码：</h4><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 在 config 中定义 restUrl</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;Protoss/utils/config.js&nbsp;[设置本地测试的域名基地址]Config.restUrl&nbsp;=&nbsp;&quot;http://mypro.com/api/v1/&quot;;</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2)在登录方法中获取 code</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;在小程序登录调用wx.login()方法中输出code，然后使用接口请求工具将code作为post请求的参数，进行调用//&nbsp;Protoss/utils/token.js&nbsp;getTokenFromServer()wx.login({
&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;code:&nbsp;&quot;&nbsp;+&nbsp;res.code);
&nbsp;&nbsp;}});</pre><h4 style=\"margin: 0px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">3.请求 PHP 接口获取 Token</h4><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">//&nbsp;引用使用es6的module引入和定义//&nbsp;全局变量以g_开头//&nbsp;私有函数以_开头import&nbsp;{&nbsp;Config&nbsp;}&nbsp;from&nbsp;&quot;config.js&quot;;class&nbsp;Token&nbsp;{
&nbsp;&nbsp;constructor()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;this.tokenUrl&nbsp;=&nbsp;Config.restUrl&nbsp;+&nbsp;&quot;token/user&quot;;
&nbsp;&nbsp;}

&nbsp;&nbsp;verify()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;token&nbsp;=&nbsp;wx.getStorageSync(&quot;token&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!token)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.getTokenFromServer();
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;}

&nbsp;&nbsp;getTokenFromServer(callBack)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;that&nbsp;=&nbsp;this;
&nbsp;&nbsp;&nbsp;&nbsp;wx.login({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;code:&nbsp;&quot;&nbsp;+&nbsp;res.code);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wx.request({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;that.tokenUrl,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;&quot;POST&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code:&nbsp;res.code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;function(res)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;token：&nbsp;&quot;&nbsp;+&nbsp;res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wx.setStorageSync(&quot;token&quot;,&nbsp;res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callBack&nbsp;&amp;&amp;&nbsp;callBack(res.data.token);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;});
&nbsp;&nbsp;}}export&nbsp;{&nbsp;Token&nbsp;};</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box; list-style: inherit;\">【补充说明】</strong>：</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 需要调试时，将 XDEBUG 参数拼接到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">this.tokenUrl</code>即可</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2) 如果没有输出 code, 需要关闭开发者工具后再重新启动，会自动调用该方法，并输出 code
 [调用过生成的 token 已经被存储到浏览器的 Storage 中，便不会再调用 Token 请求接口，从而不产生 code]</p><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-9 商品详情接口</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(1) 定义控制器方法 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">getOne($id)</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(2) 定义路由 <code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">api/:version/product/:id</code></p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(3) 模型类实现[隐藏部分字段、设置数据表关联、实现数据库查询]</p><blockquote style=\"box-sizing: border-box; list-style: inherit; margin: 0px 0px 24px; padding: 0px 15px; color: rgb(119, 119, 119); border-left: 4px solid rgb(221, 221, 221); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px;\">Product =&gt; properties =&gt; ProductProperty =&gt; 商品属性值[品名、口味、产地、保质期]
 Product =&gt; imgs =&gt; Image =&gt; 商品主图
 ProductImage =&gt; imgs.imgUrl =&gt; Image =&gt; 商品详情图</p></blockquote><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">(4) 异常处理信息提示</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">[
&nbsp;&nbsp;&nbsp;&nbsp;&#39;msg&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&#39;当前产品无详情&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&#39;errorCode&#39;&nbsp;=&gt;&nbsp;20001]</pre><h3 style=\"margin: 16px 0px 8px; padding: 0px; font-size: 14px; box-sizing: border-box; list-style: inherit; line-height: 24px; font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">9-10-1 路由变量规则</h3><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">1.路由匹配规则在项目中的应用。</p><pre class=\"prism-token token  language-javascript\" style=\"box-sizing: border-box; list-style: inherit; padding: 1em; color: rgb(204, 204, 204); background-color: rgb(80, 85, 107); border-radius: 3px; overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace; overflow-wrap: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; font-size: 14px;\">Route::get(&#39;api/:version/product/recent&#39;,&nbsp;&#39;api/:version.Product/getRecent&#39;);Route::get(&#39;api/:version/product/:id&#39;,&nbsp;&#39;api/:version.Product/getOne&#39;);</pre><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">2.存在的问题</p><p style=\"margin-top: 0px; margin-bottom: 8px; padding: 0px; box-sizing: border-box; list-style: inherit; min-height: 24px; color: rgb(51, 51, 51); font-family: &quot;pingfang SC&quot;, &quot;helvetica neue&quot;, arial, &quot;hiragino sans gb&quot;, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif; font-size: 14px; white-space: pre-wrap; background-color: rgb(255, 255, 255);\">目前调用接口都不存在问题，但是当将<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">:id</code>行放到<code style=\"box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rgb(243, 245, 249); border-radius: 0px; padding: 0px 5px; color: rgb(10, 191, 91); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, &quot;Microsoft Yahei&quot;, monospace; line-height: 20px;\">recent</code>行之前后，在调用&lt;code style=&quot;box-sizing: border-box; list-style: inherit; display: inline-block; background-color: rg</p>',`publishtime`='1587114011',`commentflag`='1',`status`='1',`shorttitle`='',`updatetime`='1587114194',`flag`='6' WHERE `id` = 578 [ RunTime:0.0021s ]
SQL: SHOW COLUMNS FROM `my_attachmentindex` [ RunTime:0.0160s ]
SQL: DELETE FROM `my_attachmentindex` WHERE `arcid` = 578 AND `modelid` = 1 [ RunTime:0.0026s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000030s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000063s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.003469s ]
INFO: [ view_parse ] --END-- [ RunTime:0.003510s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000114s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000138s ]

[ 2020-04-17T17:03:15+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44/p/0
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000250s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000293s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000325s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0071s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0006s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000057s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000087s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012835s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012867s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000116s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000139s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000325s ]
INFO: [ app_end ] --END-- [ RunTime:0.000352s ]

[ 2020-04-17T17:03:52+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000316s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000331s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000369s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000063s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000095s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007168s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007199s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000131s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000153s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000352s ]
INFO: [ app_end ] --END-- [ RunTime:0.000380s ]

[ 2020-04-17T17:03:52+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=config&&noCache=1587114303504
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000232s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000303s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000335s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000328s ]
INFO: [ app_end ] --END-- [ RunTime:0.000368s ]

[ 2020-04-17T17:05:06+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000250s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000295s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000330s ]
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1762 行.
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1763 行.
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0012s ]
SQL: INSERT INTO `my_article` (`title`,`jumpurl`,`cid`,`litpic`,`keywords`,`tag`,`description`,`author`,`copyfrom`,`content`,`publishtime`,`commentflag`,`status`,`shorttitle`,`updatetime`,`click`,`aid`,`flag`) VALUES ('php经纬度计算距离','','44','','php经纬度计算距离','','小楠源码
/**
&nbsp;*&nbsp;@param&nbsp;$lat1
&nbsp;*&nbsp;@param&nbsp;$lng1
&nbsp;*&nbsp;@param&nbsp;$lat2
&nbsp;*&nbsp;','管理员','','<pre style=\"box-sizing: border-box; outline: 0px; margin-top: 0px; margin-bottom: 24px; padding: 8px; position: relative; font-family: Consolas, Inconsolata, Courier, monospace; white-space: pre-wrap; overflow-wrap: break-word; overflow-x: auto; line-height: 22px; color: rgb(0, 0, 0); border: 0px;\">小楠源码
/**
&nbsp;*&nbsp;@param&nbsp;$lat1
&nbsp;*&nbsp;@param&nbsp;$lng1
&nbsp;*&nbsp;@param&nbsp;$lat2
&nbsp;*&nbsp;@param&nbsp;$lng2
&nbsp;*&nbsp;@return&nbsp;int&nbsp;*/function&nbsp;getDistance($lat1,&nbsp;$lng1,&nbsp;$lat2,&nbsp;$lng2){&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;将角度转为狐度&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$radLat1&nbsp;=&nbsp;deg2rad($lat1);//&nbsp;deg2rad()函数将角度转换为弧度
&nbsp;&nbsp;&nbsp;&nbsp;$radLat2&nbsp;=&nbsp;deg2rad($lat2);&nbsp;&nbsp;&nbsp;&nbsp;$radLng1&nbsp;=&nbsp;deg2rad($lng1);&nbsp;&nbsp;&nbsp;&nbsp;$radLng2&nbsp;=&nbsp;deg2rad($lng2);</pre><pre style=\"box-sizing: border-box; outline: 0px; margin-top: 0px; margin-bottom: 24px; padding: 8px; position: relative; font-family: Consolas, Inconsolata, Courier, monospace; white-space: pre-wrap; overflow-wrap: break-word; overflow-x: auto; line-height: 22px; color: rgb(0, 0, 0); border: 0px;\">
&nbsp;&nbsp;&nbsp;&nbsp;$a&nbsp;=&nbsp;$radLat1&nbsp;-&nbsp;$radLat2;&nbsp;&nbsp;&nbsp;&nbsp;$b&nbsp;=&nbsp;$radLng1&nbsp;-&nbsp;$radLng2;&nbsp;&nbsp;&nbsp;&nbsp;$s&nbsp;=&nbsp;2&nbsp;*&nbsp;asin(sqrt(pow(sin($a&nbsp;/&nbsp;2),&nbsp;2)+cos($radLat1)&nbsp;*&nbsp;cos($radLat2)&nbsp;*&nbsp;pow(sin($b&nbsp;/&nbsp;2),&nbsp;2)))&nbsp;*&nbsp;6378.137;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$s;

}/**
&nbsp;*&nbsp;@param&nbsp;$lat1
&nbsp;*&nbsp;@param&nbsp;$lon1
&nbsp;*&nbsp;@param&nbsp;$lat2
&nbsp;*&nbsp;@param&nbsp;$lon2
&nbsp;*&nbsp;@param&nbsp;float&nbsp;$radius&nbsp;&nbsp;星球半径&nbsp;KM
&nbsp;*&nbsp;@return&nbsp;float&nbsp;*/function&nbsp;distance($lat1,&nbsp;$lon1,&nbsp;$lat2,$lon2,$radius&nbsp;=&nbsp;6378.137)
{&nbsp;&nbsp;&nbsp;&nbsp;$rad&nbsp;=&nbsp;floatval(M_PI&nbsp;/&nbsp;180.0);&nbsp;&nbsp;&nbsp;&nbsp;$lat1&nbsp;=&nbsp;floatval($lat1)&nbsp;*&nbsp;$rad;&nbsp;&nbsp;&nbsp;&nbsp;$lon1&nbsp;=&nbsp;floatval($lon1)&nbsp;*&nbsp;$rad;&nbsp;&nbsp;&nbsp;&nbsp;$lat2&nbsp;=&nbsp;floatval($lat2)&nbsp;*&nbsp;$rad;&nbsp;&nbsp;&nbsp;&nbsp;$lon2&nbsp;=&nbsp;floatval($lon2)&nbsp;*&nbsp;$rad;&nbsp;&nbsp;&nbsp;&nbsp;$theta&nbsp;=&nbsp;$lon2&nbsp;-&nbsp;$lon1;&nbsp;&nbsp;&nbsp;&nbsp;$dist&nbsp;=&nbsp;acos(sin($lat1)&nbsp;*&nbsp;sin($lat2)&nbsp;+&nbsp;cos($lat1)&nbsp;*&nbsp;cos($lat2)&nbsp;*&nbsp;cos($theta));&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($dist&nbsp;&lt;&nbsp;0&nbsp;)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dist&nbsp;+=&nbsp;M_PI;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$dist&nbsp;=&nbsp;$dist&nbsp;*&nbsp;$radius;
}$lat1&nbsp;=&nbsp;&#39;31.253411&#39;;$lon1&nbsp;=&nbsp;&#39;121.518998&#39;;$lat2&nbsp;=&nbsp;&#39;31.277117&#39;;$lon2&nbsp;=&nbsp;&#39;120.744587&#39;;echo&nbsp;getDistance($lat1,&nbsp;$lon1,&nbsp;$lat2,&nbsp;$lon2);&nbsp;&nbsp;//&nbsp;73.734589823361echo&nbsp;distance($lat1,&nbsp;$lon1,&nbsp;$lat2,&nbsp;$lon2);&nbsp;&nbsp;&nbsp;//&nbsp;73.734589823354</pre><div style=\"box-sizing: inherit; outline: 0px; margin: 0px; padding: 0px; overflow-wrap: break-word; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, &quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\"></div><ul class=\"toolbox-list list-paddingleft-2\" style=\"list-style-type: none;\"></ul><p><br/></p>','1587114232','1','1','','1587114306','0','1','6') [ RunTime:0.0004s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000032s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000080s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.012394s ]
INFO: [ view_parse ] --END-- [ RunTime:0.012429s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000117s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]

[ 2020-04-17T17:05:08+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000014s ]
INFO: [ app_init ] --END-- [ RunTime:0.000257s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000335s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000366s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0011s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0009s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0005s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000114s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.020558s ]
INFO: [ view_parse ] --END-- [ RunTime:0.020591s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000123s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000145s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000338s ]
INFO: [ app_end ] --END-- [ RunTime:0.000366s ]

[ 2020-04-17T17:05:49+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000280s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000315s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000357s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000072s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000111s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006798s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006836s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000144s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000172s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000324s ]
INFO: [ app_end ] --END-- [ RunTime:0.000351s ]

[ 2020-04-17T17:05:49+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=config&&noCache=1587114419842
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000238s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000297s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000329s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000329s ]
INFO: [ app_end ] --END-- [ RunTime:0.000371s ]

[ 2020-04-17T17:07:08+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000253s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000318s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000359s ]
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1762 行.
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1763 行.
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0012s ]
SQL: INSERT INTO `my_article` (`title`,`jumpurl`,`cid`,`litpic`,`keywords`,`tag`,`description`,`author`,`copyfrom`,`content`,`publishtime`,`commentflag`,`status`,`shorttitle`,`updatetime`,`click`,`aid`,`flag`) VALUES ('PHP保留两位小数的几种方法','','44','','PHP保留两位小数的几种方法','','大家好我是小楠，这篇文章主要介绍了PHP保留两位小数的几种方法，在一些商品价格上也经常遇到这样的需求，给大家分享的实例代码,需要的朋友可以参考下&nbsp;代码如下所示：123456789101112$num = 10.4567;&nbsp','管理员','','<p>大家好我是小楠，这篇文章主要介绍了PHP保留两位小数的几种方法，在一些商品价格上也经常遇到这样的需求，给大家分享的实例代码,需要的朋友可以参考下</p><p></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">&nbsp;代码如下所示：</p><table width=\"800\"><tbody style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\"><tr style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" class=\"firstRow\"><td class=\"gutter\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important;\" width=\"NaN\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">1</div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">2</div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">3</div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">4</div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">5</div><div class=\"line number6 index5 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">6</div><div class=\"line number7 index6 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">7</div><div class=\"line number8 index7 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">8</div><div class=\"line number9 index8 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">9</div><div class=\"line number10 index9 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">10</div><div class=\"line number11 index10 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">11</div><div class=\"line number12 index11 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">12</div></td><td class=\"code\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" width=\"755\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$num</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= 10.4567;&nbsp; </code></div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//第一种：利用round()对浮点数进行四舍五入</code></div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">round</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$num</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,2); </code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//10.46</code></div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//第二种：利用sprintf格式化字符串</code></div><div class=\"line number6 index5 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$format_num</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= sprintf(</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;%.2f&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$num</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number7 index6 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$format_num</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">; </code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//10.46</code></div><div class=\"line number8 index7 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class=\"line number9 index8 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//第三种：利用千位分组来格式化数字的函数number_format()</code></div><div class=\"line number10 index9 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$num</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">, 2); </code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//10.46</code></div><div class=\"line number11 index10 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//或者如下</code></div><div class=\"line number12 index11 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php spaces\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important;\">&nbsp;&nbsp;</code><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$num</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">, 2, </code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;.&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">, </code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">); </code><code class=\"php comments\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(0, 130, 0) !important;\">//10/46</code></div></td></tr></tbody></table><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><span style=\"line-height: 30px; color: rgb(255, 0, 0);\"><strong>ps：PHP 数字(价格)保留两位小数</strong></span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">下面看下PHP中对一些商品的价格计算或价格的的展示，需要精确到小数点后的两位数字，也就是我们平时RMB中的分的单位。那在PHP中如何展示商品的价格，并保留到分的单位的呢？下面教程就来讲解一下。</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">php 商品价格,php保留两位小数,php商品价格展示</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><strong>PHP number_format() 函数</strong></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><code style=\"margin: 3px auto 0px; padding: 2px 4px; outline: none; font-style: inherit; font-weight: inherit; background: rgb(249, 242, 244); width: 640px; line-height: 1.5; clear: both; font-size: 14px; border: 1px solid rgb(204, 204, 204); color: rgb(199, 37, 78); border-radius: 0px; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;\">number_format()：函数可以通过千位分组的形式来格式化数字。</code></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">语法：</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><code style=\"margin: 3px auto 0px; padding: 2px 4px; outline: none; font-style: inherit; font-weight: inherit; background: rgb(249, 242, 244); width: 640px; line-height: 1.5; clear: both; font-size: 14px; border: 1px solid rgb(204, 204, 204); color: rgb(199, 37, 78); border-radius: 0px; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace;\">number_format(number,decimals,decimalpoint,separator)</code></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">参数：</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">number：必需。要格式化的数字。<br/>decimals：可选。规定多少个小数。<br/>decimalpoint：可选。规定用作小数点的字符串。<br/>separator：可选。规定用作千位分隔符的字符串。<br/></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">例：PHP商品价格以元为单位，保留两位小数</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><strong>代码：</strong></p><table width=\"800\"><tbody style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\"><tr style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" class=\"firstRow\"><td class=\"gutter\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important;\" width=\"NaN\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">1</div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">2</div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">3</div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">4</div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">5</div><div class=\"line number6 index5 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">6</div><div class=\"line number7 index6 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">7</div><div class=\"line number8 index7 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">8</div><div class=\"line number9 index8 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">9</div><div class=\"line number10 index9 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">10</div><div class=\"line number11 index10 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">11</div><div class=\"line number12 index11 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">12</div></td><td class=\"code\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" width=\"755\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">&lt;?php</code></div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$a</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= 10;</code></div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$a</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;2&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$b</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= 1000000;</code></div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$b</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;2&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number6 index5 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$c</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= 5458.5684;</code></div><div class=\"line number7 index6 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$c</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;2&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number8 index7 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$d</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= </code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;1254.8963&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">;</code></div><div class=\"line number9 index8 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$d</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;2&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number10 index9 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$e</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">= </code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;88.9643&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">;</code></div><div class=\"line number11 index10 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php variable\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(170, 119, 0) !important;\">$e</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&#39;2&#39;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number12 index11 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">?&gt;</code></div></td></tr></tbody></table><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">输出结果：</p><blockquote style=\"margin: 0px auto 10px; padding: 4px 4px 4px 10px; outline: none; background: rgb(244, 249, 251); border-left: 3px solid rgb(116, 205, 230);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px 4px; outline: none; line-height: 30px;\">10.00<br/>1,000,000.00<br/>5,458.57<br/>1,254.90<br/>88.96</p></blockquote><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><span style=\"line-height: 30px; color: rgb(255, 0, 0);\"><strong>以上示例总结：</strong></span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">1、无论是数字类型或是字符串类型的数字，都可以被 number_format() 函数操作<br/>2、number_format() 在操作不含有小数的数字时，如果设置了有多小个小数，会以 0 的形式补充。<br/>3、如果操作带有多少小数的数字，会以四舍五入的方式进行最近一位的取值<br/>4、如果不设置 number_format() 第三个和第四个参数，整数部分如果大于3位，那么从小数点左边向右开始，每三位都用&#39;,&#39;号分割</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\"><span style=\"line-height: 30px; color: rgb(255, 0, 0);\"><strong>例 PHP number_format() 去掉整数部分的分割符号</strong></span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">代码：</p><table width=\"800\"><tbody style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; text-align: left !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\"><tr style=\"word-break: break-all !important; border-radius: 0px !important; background: none !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; line-height: 1.1em !important; margin: 0px !important; outline: 0px !important; overflow: visible !important; padding: 0px !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" class=\"firstRow\"><td class=\"gutter\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; color: rgb(175, 175, 175) !important;\" width=\"NaN\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">1</div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">2</div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">3</div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">4</div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 0.5em 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border-width: 0px 3px 0px 0px !important; border-top-style: initial !important; border-right-style: solid !important; border-bottom-style: initial !important; border-left-style: initial !important; border-top-color: initial !important; border-right-color: rgb(108, 226, 108) !important; border-bottom-color: initial !important; border-left-color: initial !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; text-align: right !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\">5</div></td><td class=\"code\" style=\"padding: 8px; border-color: rgb(193, 218, 215); line-height: 22px; margin: 0px !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none !important; bottom: auto !important; float: none !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important;\" width=\"764\"><div class=\"line number1 index0 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">&lt;?php</code></div><div class=\"line number2 index1 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;1000000&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,2,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;.&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number3 index2 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;1000000&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,2,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;.&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;x&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number4 index3 alt1\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php functions\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: rgb(255, 20, 147) !important;\">echo</code> <code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">number_format(</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;1000000&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,2,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;y&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">,</code><code class=\"php string\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: blue !important;\">&quot;x&quot;</code><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">);</code></div><div class=\"line number5 index4 alt2\" style=\"line-height: 17.6px; color: rgb(159, 184, 204); margin: 0px !important; padding: 0px 1em !important; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; background: none rgb(252, 252, 252) !important; border: 0px !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; width: auto !important; box-sizing: content-box !important; font-size: 1em !important; min-height: auto !important; white-space: pre !important;\"><code class=\"php plain\" style=\"margin: 3px auto 0px; padding: 0px 0px 0px 5px; background: rgb(255, 255, 255); border-left: 3px solid rgb(108, 226, 108); line-height: 30px; width: 640px; font-size: 14px; clear: both; outline: 0px !important; word-break: break-all !important; border-radius: 0px !important; border-top: 0px !important; border-right: 0px !important; border-bottom: 0px !important; border-image: initial !important; bottom: auto !important; float: none !important; height: auto !important; left: auto !important; overflow: visible !important; position: static !important; right: auto !important; top: auto !important; vertical-align: baseline !important; box-sizing: content-box !important; font-family: Consolas, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, monospace !important; min-height: auto !important; color: black !important;\">?&gt;</code></div></td></tr></tbody></table><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">输出结果：</p><blockquote style=\"margin: 0px auto 10px; padding: 4px 4px 4px 10px; outline: none; background: rgb(244, 249, 251); border-left: 3px solid rgb(116, 205, 230);\"><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 0px 4px; outline: none; line-height: 30px;\">1000000.00<br/>1x000x000.00<br/>1x000x000y00</p></blockquote><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">以上示例总结：</p><p style=\"margin-top: 0px; margin-bottom: 0px; padding: 3px 0px; outline: none; line-height: 30px;\">1、number_format() 函数的第三个参数，可以替换小数字的展示方式，比如把小数点换成y<br/>2、number_format() 函数的第四个参数，可以替换整数部分的千分位分割符号，比如为空，或为X<br/>3、要注意的是，number_format() 函数的第三个参数与第四个参数是共同存在的，不能只填写一个</p><p><br/></p>','1587114349','1','1','','1587114428','0','1','6') [ RunTime:0.1738s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000031s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000059s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.003636s ]
INFO: [ view_parse ] --END-- [ RunTime:0.003683s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000118s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000143s ]

[ 2020-04-17T17:07:09+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000412s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000322s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000354s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0013s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0006s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000062s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000095s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.020194s ]
INFO: [ view_parse ] --END-- [ RunTime:0.020226s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000119s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000331s ]
INFO: [ app_end ] --END-- [ RunTime:0.000361s ]

[ 2020-04-17T17:07:21+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000295s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000374s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000407s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000078s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000119s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006933s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006969s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000168s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000196s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000333s ]
INFO: [ app_end ] --END-- [ RunTime:0.000361s ]

[ 2020-04-17T17:07:21+08:00 ] 123.182.91.5 /xn_admin.php?s=/Public/editorMethod&action=config&&noCache=1587114511858
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000242s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000312s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000355s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000306s ]
INFO: [ app_end ] --END-- [ RunTime:0.000337s ]

[ 2020-04-17T17:08:53+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000254s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000302s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000336s ]
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1762 行.
NOTIC: [8] Undefined offset: 0 /www/wwwroot/ym.cxzch.cn/App/Common/Common/function.php 第 1763 行.
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0012s ]
SQL: INSERT INTO `my_article` (`title`,`jumpurl`,`cid`,`litpic`,`keywords`,`tag`,`description`,`author`,`copyfrom`,`content`,`publishtime`,`commentflag`,`status`,`shorttitle`,`updatetime`,`click`,`aid`,`flag`) VALUES ('PHP将数组存入数据库中的四种方式','','44','','PHP将数组存入数据库中的四种方式','','PHP将数组存入数据库中的四种方式最近突然遇到了一个问题，如何用PHP将数组存入到数据库中，经过自己的多方查找和研究，总结了以下四种方法：1.implode()和explode()方式2.print_r()和自定义函数方式3.seriali','管理员','','<p>PHP将数组存入数据库中的四种方式</p><p>最近突然遇到了一个问题，如何用PHP将数组存入到数据库中，经过自己的多方查找和研究，总结了以下四种方法：</p><p>1.implode()和explode()方式</p><p>2.print_r()和自定义函数方式</p><p>3.serialize()和unserialize()方式</p><p>4.json_encode()和json_decode()方式</p><p>&lt;?php</p><p><span style=\"white-space:pre\">	</span>// 将数组存入数据库中的四种方式详见我的博客 http://blog.csdn.net/the_victory</p><p><span style=\"white-space:pre\">	</span>//1.implode和explode方式</p><p><span style=\"white-space:pre\">	</span>//2.print_r和自定义函数方式</p><p><span style=\"white-space:pre\">	</span>//3.serialize和unserialize方式</p><p><span style=\"white-space:pre\">	</span>//4.json_encode和json_decode方式</p><p><span style=\"white-space:pre\">	</span>// 如果想运行该文件，需要建立数据库admin,和数据表test,或者修改代码</p><p><span style=\"white-space:pre\">	</span>//&nbsp; &nbsp;<span style=\"white-space:pre\">	</span>//---------------------------------------------------------------</p><p><span style=\"white-space:pre\">	</span>//&nbsp; CREATE TABLE `test` (</p><p><span style=\"white-space:pre\">	</span>//&nbsp; &nbsp;`id` int(10) unsigned NOT NULL AUTO_INCREMENT key,</p><p><span style=\"white-space:pre\">	</span>//&nbsp; &nbsp;`array` text,</p><p><span style=\"white-space:pre\">	</span>// ) ENGINE=InnoDB DEFAULT CHARSET=utf8 ;</p><p>&nbsp; <span style=\"white-space:pre\">	</span>//定义用print_r将数组存储到数据库中的类</p><p>&nbsp;</p><p>header(&#39;content-type:text/html; charset=utf8&#39;);</p><p><span style=\"white-space:pre\">	</span>define(&quot;DB_HOST&quot;,&quot;localhost&quot;);</p><p><span style=\"white-space:pre\">	</span>define(&quot;DB_USER&quot;,&quot;root&quot;);</p><p><span style=\"white-space:pre\">	</span>define(&quot;DB_PWD&quot;,&quot;0227&quot;);</p><p><span style=\"white-space:pre\">	</span>define(&quot;DB_DBNAME&quot;,&quot;admin&quot;);</p><p><span style=\"white-space:pre\">	</span>define(&quot;DB_CHARSET&quot;,&quot;utf8&quot;);</p><p><span style=\"white-space:pre\">	</span>// 定义逆置print_r值的类</p><p>class Trie {</p><p>&nbsp; protected $dict = array();</p><p>&nbsp; protected $buf = &#39;&#39;;</p><p>&nbsp; function set($word, $value=&#39;&#39;) {</p><p>&nbsp; &nbsp; if(is_array($word)) foreach($word as $k=&gt;$v) $this-&gt;set($k, $v);</p><p>&nbsp; &nbsp; $p =&amp; $this-&gt;dict;</p><p>&nbsp; &nbsp; foreach(str_split($word) as $ch) {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; if(! isset($p[$ch])) $p[$ch] = array();</p><p>&nbsp; &nbsp; &nbsp; &nbsp; $p =&amp; $p[$ch];</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; $p[&#39;val&#39;] = $value;</p><p>&nbsp; &nbsp; return $this;</p><p>&nbsp; }</p><p>&nbsp; function parse($str) {</p><p>&nbsp; &nbsp; $this-&gt;doc = $str;</p><p>&nbsp; &nbsp; $this-&gt;len = strlen($str);</p><p>&nbsp; &nbsp; $i = 0;</p><p>&nbsp; &nbsp; while($i &lt; $this-&gt;len) {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; $t = $this-&gt;find($this-&gt;dict, $i);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; if($t) {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $i = $t;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;buf = &#39;&#39;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; }else $this-&gt;buf .= $this-&gt;doc{$i++};</p><p>&nbsp; &nbsp; }</p><p>&nbsp; }</p><p>&nbsp; protected function find(&amp;$p, $i) {</p><p>&nbsp; &nbsp; if($i &gt;= $this-&gt;len) return $i;</p><p>&nbsp; &nbsp; $t = 0;</p><p>&nbsp; &nbsp; $n = $this-&gt;doc{$i};</p><p>&nbsp; &nbsp; if( isset($p[$n]) ) $t = $this-&gt;find($p[$n], $i+1);</p><p>&nbsp; &nbsp; if($t) return $t;</p><p>&nbsp; &nbsp; if( isset($p[&#39;val&#39;]) ) {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; $ar = explode(&#39;,&#39;, $p[&#39;val&#39;]);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; call_user_func_array( array($this, array_shift($ar)), $ar );</p><p>&nbsp; &nbsp; &nbsp; &nbsp; return $i;</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; return $t;</p><p>&nbsp; }</p><p>&nbsp; function __call($method, $param) {</p><p>&nbsp; &nbsp; echo &quot;****\\n$this-&gt;buf 未定义方法:$method 参数:&quot; . join(&#39;,&#39;, $param) . &quot;&lt;br /&gt;\\n&quot;;</p><p>&nbsp; }</p><p>}</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>class App extends Trie {</p><p>&nbsp; public $res = array();</p><p>&nbsp; protected $stack = array();</p><p>&nbsp; protected $keyname = &#39;&#39;;</p><p>&nbsp; protected $buf = &#39;&#39;;</p><p>&nbsp; function __construct() {</p><p>&nbsp; &nbsp; $this-&gt;stack[] =&amp; $this-&gt;res;</p><p>&nbsp; }</p><p>&nbsp; protected function group() {</p><p>&nbsp; &nbsp; if(! $this-&gt;keyname) return;</p><p>&nbsp; &nbsp; $cnt = count($this-&gt;stack) - 1;</p><p>&nbsp; &nbsp; $this-&gt;stack[$cnt][$this-&gt;keyname] = array();</p><p>&nbsp; &nbsp; $this-&gt;stack[] =&amp; $this-&gt;stack[$cnt][$this-&gt;keyname];</p><p>&nbsp; &nbsp; $this-&gt;keyname = &#39;&#39;;</p><p>&nbsp; }</p><p>&nbsp; protected function brackets($c) {</p><p>&nbsp; &nbsp; $cnt = count($this-&gt;stack) - 1;</p><p>&nbsp; &nbsp; switch($c) {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; case &#39;)&#39;:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($this-&gt;keyname) $this-&gt;stack[$cnt][$this-&gt;keyname] = trim($this-&gt;buf);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;keyname = &#39;&#39;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_pop($this-&gt;stack);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; case &#39;[&#39;:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($this-&gt;keyname) $this-&gt;stack[$cnt][$this-&gt;keyname] = trim($this-&gt;buf);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; case &#39;]&#39;:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;keyname = $this-&gt;buf;</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; $this-&gt;buf = &#39;&#39;;</p><p>&nbsp; }</p><p>}</p><p>//类结束</p><p>//</p><p>//</p><p>//连接数据库</p><p><span style=\"white-space:pre\">	</span>function connect(){</p><p><span style=\"white-space:pre\">	</span>&nbsp; &nbsp; $link = @mysql_connect(DB_HOST,DB_USER,DB_PWD) or die(&quot;数据库连接失败ERR:&quot;.mysql_errno().&quot;:&quot;.mysql_error());</p><p><span style=\"white-space:pre\">	</span>&nbsp; &nbsp; mysql_select_db(DB_DBNAME) or die(&quot;打开数据库失败&quot;);//mysql_errno()即显示错误数量；mysql_error()即显示错误信息；</p><p><span style=\"white-space:pre\">	</span>&nbsp; &nbsp;<span style=\"white-space:pre\">	</span>$sql = &#39;set names &#39;.DB_CHARSET;</p><p><span style=\"white-space:pre\">	</span>&nbsp; &nbsp; mysql_query($sql) or die (&quot;设置字符集失败&quot;);</p><p><span style=\"white-space:pre\">	</span>&nbsp; &nbsp; return $link;</p><p><span style=\"white-space:pre\">	</span>}</p><p>//插入数据库函数</p><p>&nbsp;</p><p><span style=\"white-space:pre\">	</span>function insert($table, $array){</p><p><span style=\"white-space:pre\">		</span>$keys = join(&quot;,&quot;,array_keys($array));</p><p><span style=\"white-space:pre\">		</span>$vals = &quot;&#39;&quot;.join(&quot;&#39;,&#39;&quot;,array_values($array)).&quot;&#39;&quot;;</p><p><span style=\"white-space:pre\">		</span>$sql = &quot;insert {$table}({$keys})values({$vals})&quot;;</p><p><span style=\"white-space:pre\">		</span></p><p><span style=\"white-space:pre\">		</span>mysql_query($sql);</p><p><span style=\"white-space:pre\">		</span>return mysql_insert_id();</p><p><span style=\"white-space:pre\">	</span>}</p><p>&nbsp;//提取刚刚插入的数据</p><p>&nbsp; function select($table){</p><p>&nbsp;<span style=\"white-space:pre\">	</span> <span style=\"white-space:pre\">	</span> $sql = &quot;select array from {$table} order by id desc&quot;;</p><p>&nbsp;<span style=\"white-space:pre\">	</span> if($result = mysql_query($sql)){</p><p>&nbsp;<span style=\"white-space:pre\">	</span> <span style=\"white-space:pre\">	</span>$values = mysql_fetch_assoc($result);&nbsp;</p><p>&nbsp;<span style=\"white-space:pre\">	</span> <span style=\"white-space:pre\">	</span>$value = array_pop($values);</p><p>&nbsp;<span style=\"white-space:pre\">	</span>}else{</p><p>&nbsp;<span style=\"white-space:pre\">		</span>echo &#39;提取失败&#39;;</p><p>&nbsp;<span style=\"white-space:pre\">	</span>}</p><p>&nbsp;<span style=\"white-space:pre\">	</span>return $value;</p><p>&nbsp;}</p><p>&nbsp;</p><p>//implode方式 一维数组可以，二维数组不可以，并且关联数组无效</p><p><span style=\"white-space:pre\">	</span>function plode($table,$arr){</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;b&gt;implode&lt;/b&gt;方式&lt;br/&gt;原数组,未插入前:&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($arr);</p><p><span style=\"white-space:pre\">		</span>$str = addslashes(implode(&quot;,&quot;, $arr));</p><p><span style=\"white-space:pre\">		</span>$insert = array(&#39;id&#39;=&gt;&#39;&#39;,&#39;array&#39;=&gt;$str);</p><p><span style=\"white-space:pre\">		</span>if(insert($table,$insert)){</p><p><span style=\"white-space:pre\">			</span>echo &quot;插入成功.&lt;br/&gt;&quot;;</p><p><span style=\"white-space:pre\">		</span>}else{</p><p><span style=\"white-space:pre\">			</span>echo &quot;插入失败&quot;;</p><p><span style=\"white-space:pre\">			</span>exit;</p><p><span style=\"white-space:pre\">		</span>}</p><p><span style=\"white-space:pre\">		</span>$value = select($table);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;插入的内容：&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span></p><p><span style=\"white-space:pre\">		</span>var_dump($value);</p><p><span style=\"white-space:pre\">		</span>$explode = explode(&quot;,&quot;,$value);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;最终提取后处理的内容：&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($explode);</p><p>&nbsp;</p><p><span style=\"white-space:pre\">	</span>}</p><p>&nbsp;</p><p>// print_r方式</p><p><span style=\"white-space:pre\">	</span>function printR($table,$arr){</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;b&gt;print_r方式&lt;/b&gt;&lt;br/&gt;原数组,未插入前:&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($arr);</p><p>&nbsp;</p><p><span style=\"white-space:pre\">		</span>$print = addslashes(print_r($arr, true));</p><p><span style=\"white-space:pre\">		</span>$insert = array(&#39;id&#39;=&gt;&#39;&#39;,&#39;array&#39;=&gt;$print);</p><p><span style=\"white-space:pre\">		</span>insert($table,$insert);</p><p><span style=\"white-space:pre\">		</span>$value = select($table);</p><p><span style=\"white-space:pre\">		</span></p><p>&nbsp;</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;插入的内容:&gt;&lt;/h3&gt;&#39;;</p><p>&nbsp;</p><p><span style=\"white-space:pre\">		</span>var_dump($value);</p><p>$p = new App;</p><p>$p-&gt;set(&#39;Array&#39;,&#39;group&#39;)</p><p>&nbsp; -&gt;set(&#39;[&#39;,&#39;brackets,[&#39;)</p><p>&nbsp; -&gt;set(&#39;] =&gt;&#39;,&#39;brackets,]&#39;)</p><p>&nbsp; -&gt;set(&#39;)&#39;,&#39;brackets,)&#39;);</p><p>$p-&gt;parse($value);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;最终提取后处理的内容：&gt;&lt;/h3&gt;&#39;;</p><p>&nbsp;</p><p>var_dump($p-&gt;res);</p><p><span style=\"white-space:pre\">	</span>}</p><p>&nbsp;</p><p>&nbsp;</p><p>// serialize方式</p><p>function serial($table,$arr){</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;b&gt;serialize&lt;/b&gt;方式&lt;br/&gt;原数组,未插入前:&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($arr);</p><p>&nbsp;</p><p><span style=\"white-space:pre\">		</span>$serialize = addslashes(serialize($arr));</p><p><span style=\"white-space:pre\">		</span>$insert = array(&#39;id&#39;=&gt;&#39;&#39;,&#39;array&#39;=&gt;$serialize);</p><p><span style=\"white-space:pre\">		</span>insert($table,$insert);</p><p><span style=\"white-space:pre\">		</span>$value = select($table);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;方式插入数据库中的内容:&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($value);</p><p><span style=\"white-space:pre\">		</span>$serialize = unserialize($value);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;最终提取后处理的内容：&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($serialize);</p><p>}</p><p>//json方式</p><p>function json($table,$arr){</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;b&gt;json_encode&lt;/b&gt;方式&lt;br/&gt;原数组,未插入前:&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($arr);</p><p>&nbsp;</p><p><span style=\"white-space:pre\">		</span>$enjson = addslashes(json_encode($arr));</p><p><span style=\"white-space:pre\">		</span>$insert = array(&#39;id&#39;=&gt;&#39;&#39;,&#39;array&#39;=&gt;$enjson);</p><p><span style=\"white-space:pre\">		</span>insert($table,$insert);</p><p><span style=\"white-space:pre\">		</span>$value = select($table);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;方式插入数据库中的内容:&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($value);</p><p><span style=\"white-space:pre\">		</span>$deunjson = json_decode($value,true);</p><p><span style=\"white-space:pre\">		</span>echo &#39;&lt;h3 style=&quot;color:red&quot;&gt;&lt;最终提取后处理的内容：&gt;&lt;/h3&gt;&#39;;</p><p><span style=\"white-space:pre\">		</span>var_dump($deunjson);</p><p>}</p><p>// 执行函数</p><p>&nbsp;//函数end</p><p>&nbsp;</p><p>&nbsp;</p><p>?&gt;</p><p>&lt;form action=&quot;&quot; method=&quot;get&quot;&gt;</p><p>&lt;select name=&quot;kind&quot;&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;1&quot;&gt;一维数组&lt;/option&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;2&quot;&gt;二维数组&lt;/option&gt;</p><p>&nbsp;</p><p>&lt;/select&gt;</p><p>&lt;select name=&quot;id&quot;&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;1&quot;&gt;implode方式&lt;/option&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;2&quot;&gt;print_r方式&lt;/option&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;3&quot;&gt;serialize方式&lt;/option&gt;</p><p><span style=\"white-space:pre\">	</span>&lt;option value=&quot;4&quot;&gt;json_encode方式&lt;/option&gt;</p><p>&nbsp;</p><p>&lt;/select&gt;</p><p>&lt;input type=&quot;submit&quot; value=&quot;提交&quot; name=&quot;submit&quot;&gt;</p><p>&lt;/form&gt;</p><p>&lt;?php</p><p>&nbsp;</p><p>if(!empty($_GET[&#39;submit&#39;])){</p><p><span style=\"white-space:pre\">	</span>$kind = $_GET[&#39;kind&#39;];</p><p><span style=\"white-space:pre\">	</span>$id = $_GET[&#39;id&#39;];</p><p>&nbsp;</p><p>&nbsp;</p><p>}else{</p><p><span style=\"white-space:pre\">	</span>echo &quot;请选择后按提交键&quot;;</p><p><span style=\"white-space:pre\">	</span>exit;</p><p><span style=\"white-space:pre\">	</span></p><p>}</p><p>&nbsp;connect();</p><p>$ar1 =array(&#39;abcd&#39;=&gt;&quot;sdfasdf&quot;,&#39;bbb&#39;=&gt;&#39;lxg&#39;,&#39;ccc&#39;=&gt;&#39;bbbbbbbbb&#39;);//定义一个一维数组</p><p>$ar2 = array(&#39;a&#39;=&gt;$ar1,&#39;b&#39;=&gt;$ar1);<span style=\"white-space:pre\">	</span>//二维数组</p><p>$table = &quot;test&quot;;//使用的数据表</p><p><span style=\"white-space:pre\">	</span>if($kind==&#39;1&#39;){</p><p><span style=\"white-space:pre\">	</span>$arr = $ar1;</p><p>}else{</p><p><span style=\"white-space:pre\">	</span>$arr = $ar2;</p><p>}</p><p>switch ($id) {</p><p><span style=\"white-space:pre\">	</span>case &#39;1&#39;:</p><p><span style=\"white-space:pre\">		</span># code...</p><p><span style=\"white-space:pre\">	</span>plode($table, $arr);</p><p><span style=\"white-space:pre\">		</span>break;</p><p><span style=\"white-space:pre\">	</span>case &#39;2&#39;:</p><p><span style=\"white-space:pre\">	</span>printR($table,$arr);</p><p><span style=\"white-space:pre\">	</span>break;</p><p><span style=\"white-space:pre\">	</span>case &#39;3&#39;:</p><p><span style=\"white-space:pre\">	</span>serial($table,$arr);</p><p><span style=\"white-space:pre\">	</span>break;</p><p><span style=\"white-space:pre\">		</span>case &#39;4&#39;:</p><p><span style=\"white-space:pre\">	</span>json($table,$arr);</p><p><span style=\"white-space:pre\">	</span>break;</p><p><span style=\"white-space:pre\">	</span>default:</p><p><span style=\"white-space:pre\">		</span>break;</p><p><span style=\"white-space:pre\">	</span>}</p><p>&nbsp;</p><p><br/></p><p><br/></p><p><br/></p>','1587114441','1','1','','1587114533','0','1','6') [ RunTime:0.0007s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000035s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000064s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.011630s ]
INFO: [ view_parse ] --END-- [ RunTime:0.011666s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000118s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000141s ]

[ 2020-04-17T17:08:55+08:00 ] 123.182.91.5 /xn_admin.php?s=/Article/index/pid/44
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000018s ]
INFO: [ app_init ] --END-- [ RunTime:0.000355s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000292s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000324s ]
SQL: SHOW COLUMNS FROM `my_article` [ RunTime:0.0011s ]
SQL: SHOW COLUMNS FROM `my_category` [ RunTime:0.0008s ]
SQL: SELECT COUNT(*) AS tp_count FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) LIMIT 1   [ RunTime:0.0005s ]
SQL: SELECT article.id AS id,article.title AS title,article.shorttitle AS shorttitle,article.color AS color,article.copyfrom AS copyfrom,article.author AS author,article.keywords AS keywords,article.litpic AS litpic,article.description AS description,article.publishtime AS publishtime,article.updatetime AS updatetime,article.click AS click,article.cid AS cid,article.commentflag AS commentflag,article.flag AS flag,article.jumpurl AS jumpurl,article.status AS status,article.userid AS userid,article.aid AS aid,article.ding AS ding,article.cai AS cai,article.tag AS tag,category.name AS catename,category.ename AS ename,category.modelid AS modelid FROM my_article article LEFT JOIN my_category category ON article.cid = category.id WHERE article.status > 0 AND article.cid IN (44) ORDER BY article.id DESC LIMIT 0,10   [ RunTime:0.0006s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000079s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000131s ]
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 130 行.
NOTIC: [8] Undefined index: p /www/wwwroot/ym.cxzch.cn/App/Runtime/Cache/Manage/f69c6ef39b3ba6d5c1d51b7a72eb971f.php 第 131 行.
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.020543s ]
INFO: [ view_parse ] --END-- [ RunTime:0.020577s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000123s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000144s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000363s ]
INFO: [ app_end ] --END-- [ RunTime:0.000391s ]

